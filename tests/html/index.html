<html>
    <head>
        <title>Z Template Tests</title>
        <script src="https://code.jquery.com/jquery-3.6.3.slim.js" integrity="sha256-DKU1CmJ8kBuEwumaLuh9Tl/6ZB6jzGOBV/5YpNE2BWc=" crossorigin="anonymous"></script>

        <script type="text/javascript" src="./jquery.template.js"></script>

        <link rel="stylesheet" type="text/css" href="../../javascript/template.css"/>
        <script type="module" src="../../javascript/template.bundle.min.js"></script>

        <script type="module" src="./test.js"></script>

        <link rel="stylesheet" type="text/css" href="./test.css"/>
    </head>
<body>
    <h1>Z Template 2.0 Tests</h1>

    <div id="header">
        <div z-var="bundle ?">
            Using a module loader.
            <a  href="?bundle">Test minified non-module bundle</a>
        </div>
        <div z-var="!bundle ?">
            Using a minified non-module bundle.
            <a href="?module">Test a module version</a>
        </div>

        <div z-var="pass ?" class="result success">✅ OK</div>
        <div z-var="!pass ?" class="result failure">❌ FAIL</div>
    </div>

    <ol id="tests">
        <!--
            <li data="INPUT_VARS">
                <article>HTML TO APPLY TEMPLATE TO</article>
                [<article>EXPECTED OUTPUT. IF MISSING OLD $.template() WILL BE USED TO GENERATE IT</article>]
            </li>
        -->
        <li data='{"isEnabled": true}'>
            <article z-scope-children="test" z-var="isEnabled .test-enabled">
                <input type="checkbox" z-var="!!isEnabled @checked"/>
            </article>
            <article z-scope-children="test" z-var="isEnabled .test-enabled" class="test-enabled">
                <input type="checkbox" z-var="!!isEnabled @checked" checked="checked"/>
            </article>
        </li>
        <li data='{"isEnabled": true}'>
            <article z-scope="test" z-var="isEnabled .test-enabled">
                <input type="checkbox" z-var="!!isEnabled @checked"/>
            </article>
            <article z-scope="test" z-var="isEnabled .test-enabled" class="test-enabled">
                <input type="checkbox" z-var="!!isEnabled @checked" checked="checked"/>
            </article>
        </li>
        <li data='{"isEnabled": true}'>
            <article template-scope="test" z-var="isEnabled .test-enabled">
                <input type="checkbox" z-var="!!isEnabled @checked"/>
                <div template-scope="test2" z-var="isEnabled .test2-enabled">
                    <input type="checkbox" z-var="!!isEnabled @checked"/>
                </div>
            </article>
        </li>
        <li data='{"true": true, "false": false}'>
            <article>
                <p z-var="true ?, false ?"></p>
                <p z-var="!true ?, !false ?"></p>
            </article>
            <article>
                <p z-var="true ?, false ?" class="z-template-hidden"></p>
                <p z-var="!true ?, !false ?" class="z-template-hidden"></p>
            </article>
        </li>
        <li data='{"foo": ["bar", "baz", "qux"]}'>
            <article>
                <ol>
                    <li template="[foo]" z-var="value text"></li>
                </ol>
                <ol>
                    <template template="[foo]"><li z-var="value text"></li></template>
                </ol>
            </article>
            <article>
                <ol>
                    <li z-var="value text" class="template-clone" template-clone="[foo]" template-clone-pos="1">bar</li><li z-var="value text" class="template-clone" template-clone="[foo]" template-clone-pos="2">baz</li><li z-var="value text" class="template-clone" template-clone="[foo]" template-clone-pos="3">qux</li><li template="[foo]" z-var="value text"></li>
                </ol>
                <ol>
                    <li z-var="value text" class="template-clone" template-clone="[foo]" template-clone-pos="1">bar</li><li z-var="value text" class="template-clone" template-clone="[foo]" template-clone-pos="2">baz</li><li z-var="value text" class="template-clone" template-clone="[foo]" template-clone-pos="3">qux</li><template template="[foo]"><li z-var="value text"></li></template>
                </ol>
            </article>
        </li>
        <li data='{"name": "John Doe", "age": 42, "address": {"street": "123 Main St.", "city": "Anytown", "state": "CA", "zip": "12345"}}'>
            <article>
                <p z-var="address.street text {address.zip == 12345}"></p>
                <p z-var="address.street text {address.zip > 12340}"></p>
                <p z-var="address.street text {address.zip < 12340}"></p>
            </article>
            <article>
                <p z-var="address.street text {address.zip == 12345}">123 Main St.</p>
                <p z-var="address.street text {address.zip > 12340}">123 Main St.</p>
                <p z-var="address.street text {address.zip < 12340}"></p>
            </article>
        </li>
        <li data='{"name": "John Doe", "age": 42, "address": {"street": "123 Main St.", "city": "Anytown", "state": "CA", "zip": "12345"}}'>
            <article>
                <p z-var="address.street text"></p>
                <p z-var="address.city text"></p>
                <h1 z-var="name text"></h1>
                <p z-var="age text"></p>
            </article>
            <article>
                <p z-var="address.street text">123 Main St.</p>
                <p z-var="address.city text">Anytown</p>
                <h1 z-var="name text">John Doe</h1>
                <p z-var="age text">42</p>
            </article>
        </li>
        <li data='{"isEnabled": true}'>
            <article>
                <input type="checkbox" z-var="isEnabled @checked" template-scope="inherit"/>
                <div template-scope="inherit">
                    <input type="checkbox" z-var="!!isEnabled @checked"/>
                </div>
            </article>
            <!-- <article> -->
            <!--     <input type="checkbox" z-var="isEnabled @checked" template-scope="inherit" checked="checked"/> -->
            <!--     <div template-scope="inherit"> -->
            <!--         <input type="checkbox" z-var="!!isEnabled @checked" checked="checked"/> -->
            <!--     </div> -->
            <!-- </article> -->
        </li>
        <li data='{"isEnabled": true}'>
            <article>
                <input type="checkbox" z-var="isEnabled @checked" template-scope="test"/>
                <div template-scope="test">
                    <input type="checkbox" z-var="!!isEnabled @checked"/>
                </div>
            </article>
            <!-- <article> -->
            <!--     <input type="checkbox" z-var="isEnabled @checked" template-scope="test"/> -->
            <!--     <div template-scope="test"> -->
            <!--         <input type="checkbox" z-var="!!isEnabled @checked"/> -->
            <!--     </div> -->
            <!-- </article> -->
        </li>
        <li data='{"isEnabled": true}'>
            <article template-scope="test">
                <input type="checkbox" z-var="isEnabled @checked"/>
                <input type="checkbox" z-var="!isEnabled @checked"/>
                <input type="checkbox" z-var="!!isEnabled @checked"/>
            </article>
        </li>
        <li data='{"sub": {"foo": "bar", "baz": "boo"}}'>
            <article>
                <template template="{sub}">
                    <h2 z-var="foo .">Test ${foo}</h2>
                    <p z-var="baz .">Looping through a list #${baz}</p>
                </template>
            </article>
            <article>
                <h2 z-var="foo ." class="template-clone" template-clone="{sub}" template-clone-pos="1" z-var-content="Test ${foo}">Test bar</h2><p z-var="baz ." class="template-clone" template-clone="{sub}" template-clone-pos="1" z-var-content="Looping through a list #${baz}">Looping through a list #boo</p><template template="{sub}">
                <h2 z-var="foo .">Test ${foo}</h2>
                <p z-var="baz .">Looping through a list #${baz}</p>
            </template>
            </article>
        </li>
        <li data='{"list": [11,12,13,14]}'>
            <article>
                <template template="[list]">
                    <h2 z-var="value .">Test ${value}</h2>
                    <p z-var="value .">Looping through a list #${value}</p>
                </template>
            </article>
            <article>
                <h2 z-var="value ." class="template-clone" template-clone="[list]" template-clone-pos="1" z-var-content="Test ${value}">Test 11</h2><p z-var="value ." class="template-clone" template-clone="[list]" template-clone-pos="1" z-var-content="Looping through a list #${value}">Looping through a list #11</p><h2 z-var="value ." class="template-clone" template-clone="[list]" template-clone-pos="2" z-var-content="Test ${value}">Test 12</h2><p z-var="value ." class="template-clone" template-clone="[list]" template-clone-pos="2" z-var-content="Looping through a list #${value}">Looping through a list #12</p><h2 z-var="value ." class="template-clone" template-clone="[list]" template-clone-pos="3" z-var-content="Test ${value}">Test 13</h2><p z-var="value ." class="template-clone" template-clone="[list]" template-clone-pos="3" z-var-content="Looping through a list #${value}">Looping through a list #13</p><h2 z-var="value ." class="template-clone" template-clone="[list]" template-clone-pos="4" z-var-content="Test ${value}">Test 14</h2><p z-var="value ." class="template-clone" template-clone="[list]" template-clone-pos="4" z-var-content="Looping through a list #${value}">Looping through a list #14</p><template template="[list]">
                <h2 z-var="value .">Test ${value}</h2>
                <p z-var="value .">Looping through a list #${value}</p>
            </template>
            </article>
        </li>
        <li data='{"name": "John Doe"}'>
            <article z-var="name @title, name .">???</article>
        </li>
        <li data='{"magic": "is real"}'>
            <article>
                <div z-var="magic event test1"></div>
                <div z-var="magic :test2"></div>
            </article>
            <article>
                <div z-var="magic event test1" data-event-test1="{&quot;value&quot;:&quot;is real&quot;,&quot;vars&quot;:{&quot;magic&quot;:&quot;is real&quot;}}"></div>
                <div z-var="magic :test2" data-event-test2="{&quot;value&quot;:&quot;is real&quot;,&quot;vars&quot;:{&quot;magic&quot;:&quot;is real&quot;}}"></div>
            </article>
        </li>
        <li data='{"magic": "is real"}'>
            <article>
                <div z-var="magic call onTest1"></div>
                <div z-var="magic *onTest2"></div>
            </article>
            <article>
                <div z-var="magic call onTest1" data-test1="{&quot;value&quot;:&quot;is real&quot;,&quot;vars&quot;:{&quot;magic&quot;:&quot;is real&quot;}}"></div>
                <div z-var="magic *onTest2" data-test2="{&quot;value&quot;:&quot;is real&quot;,&quot;vars&quot;:{&quot;magic&quot;:&quot;is real&quot;}}"></div>
            </article>
        </li>
        <li data='{"state": true}'>
            <article>
                <div z-var="!state !"></div>
                <div z-var="!state remove"></div>
                <div z-var="state !"></div>
                <div z-var="state remove"></div>
            </article>
            <article>
                <div z-var="state !"></div>
                <div z-var="state remove"></div>
            </article>
        </li>
        <li data='{"state": true}'>
            <article>
                <div z-var="!state ?"></div>
                <div z-var="!state toggle"></div>
                <div z-var="state ?"></div>
                <div z-var="state toggle"></div>
            </article>
            <article>
                <div z-var="!state ?" class="z-template-hidden"></div>
                <div z-var="!state toggle" class="z-template-hidden"></div>
                <div z-var="state ?" class="z-template-visible"></div>
                <div z-var="state toggle" class="z-template-visible"></div>
            </article>
        </li>
        <li data='{"state": true}'>
            <article>
                <div z-var="state .foo.bar"></div>
                <div z-var="state class 'foo bar'"></div>
                <div z-var="state class 'foo !bar'" class="foo bar"></div>
                <div z-var="state class '!foo !bar'" class="foo bar"></div>
            </article>
            <article>
                <div z-var="state .foo.bar" class="foo bar"></div>
                <div z-var="state class 'foo bar'" class="foo bar"></div>
                <div z-var="state class 'foo !bar'" class="foo"></div>
                <div z-var="state class '!foo !bar'" class=""></div>
            </article>
        </li>
        <li data='{"name": "John Doe"}'>
            <article z-var="name @title, name ." title="Mr.${name}">Mr.${name}</article>
        </li>
        <li data='{"isEnabled": true}'>
            <article>
                <input type="checkbox" z-var="isEnabled @checked"/>
                <input type="checkbox" z-var="!isEnabled @checked"/>
                <input type="checkbox" z-var="!!isEnabled @checked"/>
            </article>
        </li>
        <li data='{"message": "<b>Hello <i>world</i>!</b>"}'>
            <article z-var="message +"></article>
        </li>
        <li data='{"preference": "option-b"}'>
            <article>
                <form>
                    <select z-var="preference =">
                        <option value="option-a">Option A</option>
                        <option value="option-b">Option B</option>
                        <option value="option-c">Option C</option>
                    </select>
                    <input type="text" z-var="preference ="/>
                    <input type="radio" z-var="preference =" name="test-1252" value="option-a"/>
                    <input type="radio" z-var="preference =" name="test-1252" value="option-b"/>
                    <input type="radio" z-var="preference =" name="test-1252" value="option-c"/>
                    <input type="checkbox" z-var="preference =" name="test-1252" value="option-b"/>
                    <textarea z-var="preference ="></textarea>
                </form>
            </article>
            <article>
                <form>
                    <select z-var="preference =">
                        <option value="option-a">Option A</option>
                        <option value="option-b" selected="selected">Option B</option>
                        <option value="option-c">Option C</option>
                    </select>
                    <input type="text" z-var="preference =" value="option-b"/>
                    <input type="radio" z-var="preference =" name="test-1252" value="option-a"/>
                    <input type="radio" z-var="preference =" name="test-1252" value="option-b" checked="checked"/>
                    <input type="radio" z-var="preference =" name="test-1252" value="option-c"/>
                    <input type="checkbox" z-var="preference =" name="test-1252" value="option-b" checked="checked"/>
                    <textarea z-var="preference =">option-b</textarea>
                </form>
            </article>
        </li>

        <li data='{"name": "John Doe"}'>
            <article z-var="name attr title, name text">???</article>
            <article z-var="name attr title, name text" title="John Doe">John Doe</article>
        </li>
    </ol>

</body>
